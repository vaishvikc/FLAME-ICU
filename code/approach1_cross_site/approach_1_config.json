{
  "approach_name": "approach_1_cross_site_validation",
  "stage": 1,
  "description": "Approach 1: Cross-Site Model Validation - Train at RUSH, test generalization without local training",

  "data_config": {
    "consolidated_features_path": "protected_outputs/preprocessing/aggregated_features_24hr.parquet",
    "feature_selection": "explicit_list",
    "feature_columns": [
      "lactate_max", "bun_max", "creatinine_max", "ast_max", "alt_max", "bilirubin_total_max", "inr_max", "ptt_max", "pt_max",
       "fio2_set_median", "peep_set_max",
      "respiratory_rate_max", "respiratory_rate_median",
      "heart_rate_max", "heart_rate_min",
      "temp_c_max", "temp_c_min",
      "sodium_max", "sodium_min", "potassium_max", "potassium_min",
      "wbc_max", "wbc_min", "chloride_max", "bicarbonate_max",
      "platelet_count_min", "po2_arterial_min", "spo2_min", "sbp_min", "map_min", "albumin_min",
      "bilirubin_total_median", "map_median",
      "gcs_total_last",
      "device_imv", "device_nippv", "device_cpap", "device_high_flow_nc",
      "device_face_mask", "device_trach_collar", "device_nasal_cannula",
      "vasopressor_count",
      "sofa_resp", "sofa_coag", "sofa_liver", "sofa_renal", "sofa_cv_97", "sofa_cns",
      "p_f", "p_f_imputed",
      "age", "isfemale"
    ],
    "exclude_columns": [
      "hospitalization_id",
      "ethnicity_category",
      "race_category",
      "language_category",
      "row_type",
      "split_type",
      "disposition",
      "hour_24_start_dttm",
      "hour_24_end_dttm",
      "age_bin",
      "sex_category"
    ],
    "target_column": "disposition"
  },

  "preprocessing": {
    "handle_missing": {
      "xgboost": "none",
      "nn": "fill_negative_one"
    }
  },

  "xgboost_params": {
    "eta": 0.06057610120076962,
    "max_depth": 8,
    "min_child_weight": 6,
    "max_delta_step": 0,
    "subsample": 0.9274884839441507,
    "colsample_bytree": 0.9225204370066138,
    "gamma": 0.1652835907230118,
    "reg_alpha": 8.404509395484988,
    "reg_lambda": 0.10842839237042663,
    "objective": "binary:logistic",
    "eval_metric": "logloss",
    "seed": 42,
    "num_rounds": 500,
    "early_stopping_rounds": 20,
    "use_class_weights": true
  },

  "nn_params": {
    "hidden_sizes": [64, 32],
    "dropout_rate": 0.4928001664243068,
    "activation": "relu",
    "batch_norm": true,
    "learning_rate": 0.0011232186507608042,
    "weight_decay": 0.000492487423067329,
    "batch_size": 512,
    "epochs": 100,
    "early_stopping_patience": 10,
    "gradient_clip": 1.0,
    "use_class_weights": true,
    "use_focal_loss": false,
    "label_smoothing": 0.022104980413185205,
    "seed": 42
  },

  "evaluation_config": {
    "metrics": [
      "roc_auc",
      "accuracy",
      "precision",
      "recall",
      "f1_score",
      "pr_auc",
      "brier_score",
      "calibration_error"
    ],
    "threshold": 0.5,
    "calibration_bins": 10
  },

  "output_paths": {
    "models_dir": "models_storage/approach_1/stage_1/",
    "results_dir": "share_to_box/approach_1_stage_1/",
    "plots_dir": "share_to_box/approach_1_stage_1/plots/"
  },

  "random_seeds": {
    "global": 42,
    "data_split": 42,
    "xgboost": 42,
    "nn": 42,
    "preprocessing": 42
  }
}